<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<ui:composition template="/pages/templates/forAll/common.xhtml">
		<ui:define name="menu">
			<p:tabMenu activeIndex="#{param.i}">

				<p:menuitem value="#{msg['registration']}" outcome="firstRegistration.xhtml">
					<f:param name="i" value="0" />
				</p:menuitem>

			</p:tabMenu>
		</ui:define>
		<ui:define name="content">
			<h:form id="registrationForm">

				<p:growl id="growl" sticky="true" showDetail="true" />
				<p:wizard>
					<p:tab id="account" title="#{msg['profile.account']}">
						<p:panel header="#{msg['profile.account']}">
							<p:messages />

							<h:panelGrid class="createPanelGrid" columns="3">
								<h:panelGroup>
									<h:outputText value="#{msg['profile.username']}" />
									<h:outputText style="color:red" value="*  " />
								</h:panelGroup>
								<p:inputText id="userName" value="#{registrationBean.username}"
									required="true" label="#{msg['profile.labels.username']}" title="#{msg['profile.titles.username']}">
									<f:validateLength minimum="2" />
								</p:inputText>
								<h:panelGroup>
									<p:message id="userNameMsg" for="userName" />
									<p:tooltip for="userName" styleClass="tooltip"
										showEvent="focus" hideEvent="blur" />
								</h:panelGroup>

								<h:panelGroup>
									<h:outputText value="#{msg['profile.password']}"/>
									<h:outputText style="color:red" value="*  " />
								</h:panelGroup>
								<p:password id="pass1" value="#{registrationBean.password}"
									required="true" label="#{msg['profile.labels.password']}"
									title="#{msg['profile.titles.password']}" feedback="true" match="pass2">
									<f:validateLength minimum="2" />
								</p:password>
								<!-- 	<p:message id="pass1Msg" for="pass1" /> -->

								<h:panelGroup>
									<h:outputText value="#{msg['profile.password.repeat']}" />
									<h:outputText style="color:red" value="*  " />
								</h:panelGroup>
								<p:password id="pass2" required="true" label="#{msg['profile.labels.password']}"
									title="#{msg['profile.titles.password.repeat']}">
								</p:password>
								<!-- <p:message id="pass2Msg" for="pass2" /> -->

								<h:panelGroup>
									<h:outputText value="#{msg['profile.role']}" />
									<h:outputText style="color:red" value="*  " />
								</h:panelGroup>
								<p:selectOneMenu id="groups"
									value="#{registrationBean.groupname}" required="true"
									requiredMessage="#{msg['profile.role.message']}">
									<f:selectItem itemLabel="Administrator"
										itemValue="Administrator" />
								</p:selectOneMenu>
								<h:panelGroup>
									<p:message id="groupsMsg" for="groups" />
									<p:tooltip for="groups" styleClass="tooltip" showEvent="focus"
										hideEvent="blur" />
								</h:panelGroup>

							</h:panelGrid>
						</p:panel>
					</p:tab>

					<p:tab id="personal" title="#{msg['profile.personal']}" >
						<p:panel header="#{msg['profile.personal.details']}">
							<p:messages />
							<h:panelGrid class="createPanelGrid" columns="3">
								<h:panelGroup>
									<h:outputText value="#{msg['profile.firstname']}" />
									<h:outputText style="color:red" value="*  " />
								</h:panelGroup>
								<p:inputText id="firstName" label="#{msg['profile.labels.firstname']}"
									value="#{registrationBean.firstname}" required="true"
									title="#{msg['profile.titles.firstname']}">
									<f:validateLength minimum="2" />
								</p:inputText>
								<h:panelGroup>
									<p:message id="firstNameMsg" for="firstName" />
									<p:tooltip for="firstName" styleClass="tooltip"
										showEvent="focus" hideEvent="blur" />
								</h:panelGroup>

								<h:panelGroup>
									<h:outputText value="#{msg['profile.lastname']}" />
									<h:outputText style="color:red" value="*  " />
								</h:panelGroup>
								<p:inputText id="lastName" label="#{msg['profile.labels.lastname']}"
									value="#{registrationBean.lastname}" required="true"
									title="#{msg['profile.titles.lastname']}">
								</p:inputText>
								<h:panelGroup>
									<p:message id="lastNameMsg" for="lastName" />
									<p:tooltip for="lastName" styleClass="tooltip"
										showEvent="focus" hideEvent="blur" />
								</h:panelGroup>

								<h:panelGroup>
									<h:outputText value="#{msg['profile.birthday']}" />
									<h:outputText style="color:red" value="*  " />
								</h:panelGroup>
								<p:inputMask id="date" label="#{msg['profile.labels.birthday']}"
									value="#{registrationBean.birthday}" mask="99/99/9999"
									required="true" title="#{msg['profile.titles.birthday']}">
									<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
								</p:inputMask>
								<h:panelGroup>
									<p:message id="dateMsg" for="date" />
									<p:tooltip for="date" styleClass="tooltip" showEvent="focus"
										hideEvent="blur" />
								</h:panelGroup>

							</h:panelGrid>
						</p:panel>
					</p:tab>

					<p:tab id="contact" title="#{msg['profile.contact']}">
						<p:panel header="#{msg['profile.contact.info']}">
							<p:messages />
							<h:panelGrid class="createPanelGrid" columns="3">
								<h:outputText value="#{msg['profile.email']}" />
								<h:outputText style="color:red" value="*  " />
								<p:inputText value="#{registrationBean.email}" required="true"
									label="#{msg['profile.labels.email']}" size="40">
									<f:validateRegex
										pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
								</p:inputText>
							</h:panelGrid>
						</p:panel>
					</p:tab>

					<p:tab id="confirm" title="#{msg['profile.confirmation']}">
						<p:panel header="#{msg['profile.confirmation']}">
							<h:panelGrid id="confirmation" columns="3"
								columnClasses="grid,grid,grid">

								<h:panelGrid class="createPanelGrid" columns="2"
									columnClasses="label, value">


									<h:outputText value="#{msg['profile.username']}" />
									<h:outputText value="#{registrationBean.username}"
										styleClass="outputLabel" />

									<h:outputText value="#{msg['profile.password']}" />
									<h:outputText value="#{registrationBean.password}"
										styleClass="outputLabel" />

									<h:outputText value="#{msg['profile.role']}" />
									<h:outputText value="#{registrationBean.groupname}"
										styleClass="outputLabel" />

								</h:panelGrid>

								<h:panelGrid class="createPanelGrid" columns="2">


									<h:outputText value="#{msg['profile.firstname']}"  />
									<h:outputText value="#{registrationBean.firstname}"
										styleClass="outputLabel" />

									<h:outputText value="#{msg['profile.lastname']}" />
									<h:outputText value="#{registrationBean.lastname}"
										styleClass="outputLabel" />

									<h:outputText value="#{msg['profile.birthday']}" />
									<h:outputText value="#{registrationBean.birthday}"
										styleClass="outputLabel">
										<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
									</h:outputText>
								</h:panelGrid>

								<h:panelGrid class="createPanelGrid" columns="2">
									<h:outputText value="#{msg['profile.email']}" />
									<h:outputText value="#{registrationBean.email}"
										styleClass="outputLabel" />

									<h:outputText />
									<h:outputText />
								</h:panelGrid>
							</h:panelGrid>
							<p:commandButton value="#{msg['profile.create']}"
								action="#{registrationBean.registerUser}" update="growl"
								process="@this" />
						</p:panel>
					</p:tab>
				</p:wizard>
			</h:form>

		</ui:define>
	</ui:composition>
</h:body>
</html>