<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<ui:composition>

		<h:form>

			<p:toolbar id="tb">

				<f:facet name="left">

					<p:tabView>

						<p:tab title="General">
							<h:outputText value="Type :" />
							<p:selectOneButton value="#{chartsViewBean.recordsType}">
								<f:selectItem itemLabel="Temperature" itemValue="temp" />
								<f:selectItem itemLabel="Pressure" itemValue="pres" />
								<f:selectItem itemLabel="Humidity" itemValue="humi" />
							</p:selectOneButton>

							<p:commandButton type="button" onclick="refrCharts()"
								value="Refresh" icon="ui-icon-refresh" class="filters" />
						</p:tab>

						<p:tab title="Bar Chart">
							<h:panelGrid columns="5" cellpadding="1">
								<p:column>
									<h3>Devices:</h3>
								</p:column>
								<p:column>
									<p:selectCheckboxMenu id="menu" class="filters"
										label="Select devices"
										value="#{chartsViewBean.selectedDevices}" filter="true"
										filterMatchMode="startsWith" panelStyle="width:400px">
										<f:selectItems value="#{chartsViewBean.devices}" />
									</p:selectCheckboxMenu>
								</p:column>
								<p:column>
									<h3>Limit:</h3>
								</p:column>
								<p:column>
									<h:outputText id="output"
										value="Show last #{chartsViewBean.recordsCount} records per device" />
									<h:inputHidden id="txt2" value="#{chartsViewBean.recordsCount}" />
									<p:slider for="txt2" display="output" style="width: 200px"
										displayTemplate="Show last {value} records per device"
										step="1" minValue="1" maxValue="5" />
								</p:column>
								<p:column>
									<p:commandButton type="button" onclick="refrCharts()"
										value="Refresh" icon="ui-icon-refresh" class="filters" />
								</p:column>

							</h:panelGrid>
						</p:tab>

						<p:tab title="Line &amp; Average Chart">
							<h:panelGrid columns="4" cellpadding="2">

								<p:column>
									<h3>Start Date and Time:</h3>
									<p:calendar id="startDate" value="#{chartsViewBean.startDate}"
										pattern="dd/MM/yyyy HH:mm:ss" mask="true" class="filters" />
								</p:column>

								<p:column>
									<h3>End Date and Time:</h3>
									<p:calendar id="endDate" value="#{chartsViewBean.endDate}"
										pattern="dd/MM/yyyy HH:mm:ss" mask="true" class="filters" />
								</p:column>

								<p:column>
									<h3>Devices:</h3>
									<p:selectCheckboxMenu id="menu1" class="filters"
										label="Select devices"
										value="#{chartsViewBean.selectedDevices}" filter="true"
										filterMatchMode="startsWith" panelStyle="width:400px">
										<f:selectItems value="#{chartsViewBean.devices}" />
									</p:selectCheckboxMenu>
								</p:column>

								<p:column>
									<p:commandButton type="button" onclick="refrCharts()"
										value="Refresh" icon="ui-icon-refresh" class="filters" />
								</p:column>

							</h:panelGrid>
						</p:tab>

					</p:tabView>

				</f:facet>

				<f:facet name="right">
					<h:outputText value="Stcik: " />
					<p:inputSwitch value="#{chartsViewBean.sticky}" >
					<p:ajax event="change" update="stickerHolder" />
					</p:inputSwitch>
				</f:facet>

			</p:toolbar>
			
			<p:separator id="stickerHolder">
				<p:sticky target="tb" rendered="#{chartsViewBean.sticky}" />
			</p:separator>

			<p:chart type="bar" model="#{chartsViewBean.barModel}"
				style="height:400px;width:98%;" id="barChart" responsive="true" />

			<p:separator />

			<p:chart type="line" model="#{chartsViewBean.lineModel}"
				id="lineChart" responsive="true" style="height:400px;width:98%;" />

			<p:separator />

			<p:chart type="pie" model="#{chartsViewBean.pieModel}"
				style="height:400px;widht:98%" id="pieChart" responsive="true" />

			<p:remoteCommand name="refrCharts"
				update="barChart pieChart lineChart"
				actionListener="#{chartsViewBean.filtersChange}" />

		</h:form>

	</ui:composition>
</h:body>
</html>