<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<ui:composition>
		<h:form>

			<h:panelGrid columns="5" cellpadding="2" class="panelGridCenter">

				<p:column>
					<h3>Devices:</h3>
				</p:column>
				<p:column>
					<p:selectCheckboxMenu id="menu" class="filters"
						label="Select devices" value="#{chartsViewBean.selectedDevices}"
						filter="true" filterMatchMode="startsWith"
						panelStyle="width:400px">
						<f:selectItems value="#{chartsViewBean.devices}" />
					</p:selectCheckboxMenu>
				</p:column>
				<p:column>
					<h3>Limit:</h3>
				</p:column>
				<p:column>
					<h:outputText id="output"
						value="Show last #{chartsViewBean.recordsCount} records per device" />
					<h:inputHidden id="txt2" value="#{chartsViewBean.recordsCount}" />
					<p:slider for="txt2" display="output" style="width: 200px"
						displayTemplate="Show last {value} records per device" step="1"
						minValue="1" maxValue="10" />
				</p:column>
				<p:column>
					<p:remoteCommand name="refrBar" update="barChart"
						actionListener="#{chartsViewBean.refreshBar}" />
					<p:commandButton type="button" onclick="refrBar()" value="Refresh"
						icon="ui-icon-refresh" class="filters" />
				</p:column>

			</h:panelGrid>

			<p:chart type="bar" model="#{chartsViewBean.barModel}"
				style="height:400px;width:98%;" id="barChart" responsive="true" />

		</h:form>

		<br />

		<h:form>

			<div class="pieAndLineCharts">

				<p:chart type="line" model="#{chartsViewBean.lineModel}"
					id="lineChart" responsive="true" style="height:400px;width:98%;" />

				<div class="ui-grid ui-grid-responsive">
					<div class="ui-grid-row ">

						<div class="ui-grid-col-6 chartsPageBottom">

							<p:chart type="pie" model="#{chartsViewBean.pieModel}"
								style="height:300px;widht:400px" id="pieChart" responsive="true" />



						</div>

						<div class="ui-grid-col-2 chartsFilters"></div>

						<div class="ui-grid-col-4 chartsFilters">

							<h:panelGrid columns="1" cellpadding="2">

								<h3>Start Date and Time:</h3>
								<p:calendar id="startDate" value="#{chartsViewBean.startDate}"
									pattern="dd/MM/yyyy HH:mm" mask="true" />

								<h3>End Date and Time:</h3>
								<p:calendar id="endDate" value="#{chartsViewBean.endDate}"
									pattern="dd/MM/yyyy HH:mm" mask="true" />

								<h3>Devices:</h3>
								<p:selectCheckboxMenu id="menu" class="filters"
									label="Select devices"
									value="#{chartsViewBean.selectedDevices}" filter="true"
									filterMatchMode="startsWith" panelStyle="width:400px">
									<f:selectItems value="#{chartsViewBean.devices}" />
								</p:selectCheckboxMenu>

								<p:remoteCommand name="refrLineAndPie"
									update="lineChart pieChart"
									actionListener="#{chartsViewBean.filtersChange}" />
								<p:commandButton type="button" onclick="refrLineAndPie()"
									value="Refresh" icon="ui-icon-refresh" class="filters" />

							</h:panelGrid>

						</div>

					</div>

				</div>

			</div>

		</h:form>

	</ui:composition>
</h:body>
</html>