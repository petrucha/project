<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<ui:composition>

		<h:form>

			<p:fieldset legend="#{msg['profile']}">

				<h:panelGrid id="profilePanelGrid" class="centerPanelGrid" cellspacing="8" columns="3">

					<f:facet name="header">
						<h:outputText value="#{msg['edit.profile.data.on.double.click']}"/>
						<p:separator />
					</f:facet>

					<h:outputLabel class="outputLabel" for="username" value="#{msg['profiles.username']}" />
					<h:outputLabel class="outputLabel" value=":" />
					<p:inplace id="username" editor="true" effectSpeed="fast"
						event="dblclick">
						<p:inputText value="#{profileViewEditBean.currentUser.username}"
							required="true" title="#{msg['profile.valid.length']}">
							<f:validateLength minimum="2" />
						</p:inputText>
					</p:inplace>

					<h:outputLabel class="outputLabel" for="firstname"
						value="#{msg['profiles.firstname']}" />
					<h:outputLabel class="outputLabel" value=":" />
					<p:inplace id="firstname" editor="true" effectSpeed="fast"
						event="dblclick">
						<p:inputText value="#{profileViewEditBean.currentUser.firstname}"
							required="true" title="#{msg['profile.valid.length']}">
							<f:validateLength minimum="2" />
						</p:inputText>
					</p:inplace>

					<h:outputLabel class="outputLabel" for="lastname" value="#{msg['profiles.lastname']}" />
					<h:outputLabel class="outputLabel" value=":" />
					<p:inplace id="lastname" editor="true" effectSpeed="fast"
						event="dblclick">
						<p:inputText value="#{profileViewEditBean.currentUser.lastname}"
							required="true" title="#{msg['profile.valid.length']}">
							<f:validateLength minimum="2" />
						</p:inputText>
					</p:inplace>

					<h:outputLabel class="outputLabel" for="birthday" value="#{msg['profile.info.birthday']}" />
					<h:outputLabel class="outputLabel" value=":" />
					<p:inplace id="birthday" editor="true" effectSpeed="fast"
						event="dblclick">
						<p:inputMask id="date" label="#{msg['profile.info.birthday']}"
							value="#{profileViewEditBean.currentUser.birthday}"
							mask="99/99/9999" required="true"
							title="#{msg['profile.titles.my.birthday']}">
							<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
						</p:inputMask>
					</p:inplace>

					<h:outputLabel class="outputLabel" for="email" value="#{msg['profile.info.email']}" />
					<h:outputLabel class="outputLabel" value=":" />
					<p:inplace id="email" editor="true" effectSpeed="fast"
						event="dblclick">
						<p:inputText value="#{profileViewEditBean.currentUser.email}"
							required="true">
							<f:validateRegex
								pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
						</p:inputText>
					</p:inplace>

					<f:facet name="footer">
						<p:separator />
						<p:commandButton action="#{profileViewEditBean.saveProfile()}" value="#{msg['save']}"
							update="profilePanelGrid" />
					</f:facet>
				</h:panelGrid>

			</p:fieldset>
			</h:form>
			<h:form>
			<p:fieldset legend="#{msg['profile.my.password']}" toggleable="true" toggleSpeed="500" collapsed = "true">

				<h:panelGrid id="toggPanelGrid" class="centerPanelGrid" cellspacing="8" columns="3">
					<f:facet name="header">
						<h:outputText value="#{msg['change.password']}"/>
                            <p:separator />
					</f:facet>
					<h:outputLabel class="outputLabel" value="#{msg['profile.password.old']}" />
					<h:outputLabel class="outputLabel" value=":" />
					<p:password id="oldpass"
						value="#{profileViewEditBean.oldPassword}"
						title="#{msg['profile.titles.password']}" />

					<h:outputText class="outputLabel" value="#{msg['profile.password.new']}" />
					<h:outputText class="outputLabel" value=":" />
					<p:password id="pass1" value="#{profileViewEditBean.newPassword}"
						required="true" title="#{msg['profile.titles.password']}" feedback="true"
						match="pass2">
						<f:validateLength minimum="2" />
					</p:password>

					<h:outputText class="outputLabel" value="#{msg['profile.my.password.repeat']}" />
					<h:outputText class="outputLabel" value=":" />
					<p:password id="pass2" required="true"
						title="#{msg['profile.my.password.confirm']}" />

					<f:facet name="footer">
						<p:separator />
						<p:commandButton action="#{profileViewEditBean.savePassword()}" value="#{msg['save']}"
							update="toggPanelGrid" />
					</f:facet>
				</h:panelGrid>
			</p:fieldset>
		</h:form>
	</ui:composition>

</h:body>

</html>